<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NSCDC Admin Dashboard</title>
<style>
body { font-family:"Segoe UI", Tahoma, Arial, sans-serif; background:#f4f4f9; padding:20px; }
.container { max-width:1200px; margin:auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 10px 25px rgba(0,0,0,0.2); }
h1 { text-align:center; color:#228B22; margin-bottom:20px; }
table { width:100%; border-collapse:collapse; margin-top:20px; }
th, td { border:1px solid #ccc; padding:10px; text-align:center; font-size:14px; }
th { background:#228B22; color:#fff; }
.approve { background:#4CAF50; color:#fff; padding:5px 10px; border:none; cursor:pointer; border-radius:4px; }
.reject { background:#f44336; color:#fff; padding:5px 10px; border:none; cursor:pointer; border-radius:4px; }
.delete { background:#555; color:#fff; padding:5px 10px; border:none; cursor:pointer; border-radius:4px; }
.status-pending { color:#FFA500; font-weight:bold; }
.status-approved { color:#4CAF50; font-weight:bold; }
.status-rejected { color:#f44336; font-weight:bold; }
</style>
</head>
<body>

<div class="container">
    <h1>NSCDC Admin Dashboard</h1>
    <table>
        <thead>
            <tr>
                <th>Full Name</th>
                <th>Replacement No</th>
                <th>NIN</th>
                <th>State</th>
                <th>LGA</th>
                <th>Next of Kin</th>
                <th>Email</th>
                <th>Address</th>
                <th>Qualification</th>
                <th>Marital Status</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="adminData">
            <!-- Data will be populated here -->
        </tbody>
    </table>
</div>

<script>
// ================= STORAGE KEY =================
const STORAGE_KEY = "nscdc_replacements";

// ================= LOAD ADMIN TABLE =================
function loadAdminTable() {
    let volunteers = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    let tbody = document.getElementById("adminData");
    if (!tbody) return;

    tbody.innerHTML = "";

    if (volunteers.length === 0) {
        tbody.innerHTML = `<tr><td colspan="12">No applications submitted</td></tr>`;
        return;
    }

    volunteers.forEach((v, i) => {
        let statusClass = v.status.toLowerCase() === "approved" ? "status-approved" :
                          v.status.toLowerCase() === "rejected" ? "status-rejected" : "status-pending";
        tbody.innerHTML += `
            <tr>
                <td>${v.fullname}</td>
                <td>${v.replacementNo}</td>
                <td>${v.nin}</td>
                <td>${v.state}</td>
                <td>${v.lga}</td>
                <td>${v.nextOfKin}</td>
                <td>${v.email}</td>
                <td>${v.address}</td>
                <td>${v.qualification}</td>
                <td>${v.marital || v.maritalStatus || ''}</td>
                <td class="${statusClass}">${v.status}</td>
                <td>
                    <button class="approve" onclick="updateStatus(${i}, 'Approved')">Approve</button>
                    <button class="reject" onclick="updateStatus(${i}, 'Rejected')">Reject</button>
                    <button class="delete" onclick="deleteRecord(${i})">Delete</button>
                </td>
            </tr>
        `;
    });
}

// ================= UPDATE STATUS =================
function updateStatus(index, status) {
    let volunteers = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    volunteers[index].status = status;
    localStorage.setItem(STORAGE_KEY, JSON.stringify(volunteers));
    loadAdminTable();
}

// ================= DELETE RECORD =================
function deleteRecord(index) {
    let volunteers = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    if (!confirm("Are you sure you want to delete this record?")) return;
    volunteers.splice(index, 1);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(volunteers));
    loadAdminTable();
}

// ================= AUTO LOAD =================
document.addEventListener("DOMContentLoaded", () => {
    loadAdminTable();
});
</script>

</body>
</html>
